{
    name = "Markdown";
    fileTypes = (markdown);
    firstLineMatch = "markdown";
    scopeName = "text.html.markdown";
    patterns = (
        // Horizontal rules
        // Currently ignoring - because of conflict with headings
        {   name = "markup.hr.markdown";
            match = "^([*_]\\s*){3,}$";                    
        },

        // Inline formatting
        { include = "text.html.markdown.inline"; },

        // Headings
        {   name = "markup.heading.1.markdown";
            match = "^={3,}$";
        },
        {   name = "markup.heading.2.markdown";
            match = "^-{3,}$";
        },
        {   name = "markup.heading.markdown";
            match = "^#{1,9}";
        },

        // Block formatting
        {   name = "markup.list.unnumbered";
            begin = "^\\s*[*+-]";
            end = "^$";
            patterns = (
                { include = "text.html.markdown.inline"; }
            );
        },

        {   name = "markup.list.numbered";
            begin = "^\\s*[0-9]+\\.";
            end = "^$";
            patterns = (
                { include = "text.html.markdown.inline"; }
            );
        },
        
        {   name = "markup.quote.markdown";
            begin = "^\\s*>";
            end = "^$";
            patterns = (
                { include = "text.html.markdown.inline"; }
            );
        },
        {   name = "markup.raw.markdown";
            begin = "( {4,}|\t)";
            end = "^$";
            patterns = (
                { include = "text.html.markdown.inline"; }
            );
        },
        
        // Since html is valid in Markdown include the html patterns
        {   include = "text.html.basic"; },
    );
    uuid = "0A1D9874-B448-11D9-BD50-000D93B6E43C";
}