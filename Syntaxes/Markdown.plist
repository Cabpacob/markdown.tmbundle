{
    name = Markdown;
    fileTypes = (markdown);
    firstLineMatch = "markdown";
    scopeName = "text.html.markdown";
    patterns = (
        // Since html is valid in Markdown include the html patterns
        {   include = "text.html.basic"; },

        // Inline formatting
        {   name = "keyword.other.markdown";
            match = "`([^\\\\`]|\\\\.)*?`";
        },
        {   name = "keyword.other.markdown";
            match = "``.*?``";
        },
        
        {   name = "markup.italic.markdown";
            match = "[*]([^\\\\*]|\\\\.)*?[*]";
        },
        {   name = "markup.italic.markdown";
            match = "[_]([^\\\\_]|\\\\.)*?[_]";
        },
        {   name = "markup.bold.markdown";
            match = "[_]{2}([^\\\\_]|\\\\.)*?[_]{2}";
        },
        {   name = "markup.bold.markdown";
            match = "[*]{2}([^\\\\*]|\\\\.)*?[*]{2}";
        },
        {   name = "dummy.line-break";
            match = " {2,}$";
        },


        {   name = "markup.underline.link.markdown";
            match = "\\[(.*?)\\] *\\(.*?\\)";
        },
        {   name = "markup.underline.link.markdown";
            match = "\\[(.*?)\\] *\\[.*?\\]";
        },
        {   name = "markup.underline.link.markdown";
            match = "<(mailto|https?)://.*?>";
        },

        // Horizontal rules
        // Currently ignoring - because of conflict with headings
        {   name = "markup.hr.markdown";
            match = "^([*_]\s*){3,}$";
        },

        // Headings
        {   name = "markup.heading.1.markdown";
            match = "^={3,}$";
        },
        {   name = "markup.heading.2.markdown";
            match = "^-{3,}$";
        },
        {   name = "markup.heading.markdown";
            match = "^#{1,9}";
        },

        // Block formatting
        {   name = "markup.list.unnumbered";
            begin = "^\\s*[*+-]\\s+.*";
            end = "^$";
        },
        {   name = "markup.list.numbered";
            match = "^\\s*[0-9]\\.\\s+.*";
        },
        
        {   name = "markup.quote.markdown";
            match = "^\\s*>.*";
        },
        
    );
    uuid = "0A1D9874-B448-11D9-BD50-000D93B6E43C";
}